<odoo>
    <template id="dashboard_template" name="Admin Dashboard">
        <t t-call="website.layout">
            <div class="container mt-5">
                <div class="row mb-4">
                    <div class="col-12">
                        <h2 class="text-primary mb-4">
                            <i class="fa fa-tachometer-alt mr-2"></i>Admin Dashboard
                        </h2>
                    </div>
                </div>

                <div class="row">
                    <!-- Products Card -->
                    <div class="col-md-4 mb-4">
                        <a href="/ecommerce_admin/products" class="card dashboard-card h-100 text-decoration-none">
                            <div class="card-body text-center">
                                <div class="dashboard-icon bg-primary-light">
                                    <i class="fa fa-boxes text-primary"></i>
                                </div>
                                <h4 class="card-title mt-3">Products</h4>
                                <p class="text-muted">Manage your product catalog</p>
                            </div>
                            <div class="card-footer bg-transparent border-top-0">
                                <span class="text-primary">View Products <i class="fa fa-arrow-right ml-1"></i></span>
                            </div>
                        </a>
                    </div>

                    <!-- Orders Card -->
                    <div class="col-md-4 mb-4">
                        <a href="/ecommerce_admin/order" class="card dashboard-card h-100 text-decoration-none">
                            <div class="card-body text-center">
                                <div class="dashboard-icon bg-success-light">
                                    <i class="fa fa-shopping-cart text-success"></i>
                                </div>
                                <h4 class="card-title mt-3">Orders</h4>
                                <p class="text-muted">View and process orders</p>
                            </div>
                            <div class="card-footer bg-transparent border-top-0">
                                <span class="text-success">View Orders <i class="fa fa-arrow-right ml-1"></i></span>
                            </div>
                        </a>
                    </div>

                    <!-- Customers Card -->
                    <div class="col-md-4 mb-4">
                        <a href="/ecommerce_admin/customers" class="card dashboard-card h-100 text-decoration-none">
                            <div class="card-body text-center">
                                <div class="dashboard-icon bg-info-light">
                                    <i class="fa fa-users text-info"></i>
                                </div>
                                <h4 class="card-title mt-3">Customers</h4>
                                <p class="text-muted">Manage customer accounts</p>
                            </div>
                            <div class="card-footer bg-transparent border-top-0">
                                <span class="text-info">View Customers <i class="fa fa-arrow-right ml-1"></i></span>
                            </div>
                        </a>
                    </div>

                    <!-- Categories Card -->
                    <div class="col-md-4 mb-4">
                        <a href="/ecommerce_admin/categories" class="card dashboard-card h-100 text-decoration-none">
                            <div class="card-body text-center">
                                <div class="dashboard-icon bg-warning-light">
                                    <i class="fa fa-tags text-warning"></i>
                                </div>
                                <h4 class="card-title mt-3">Categories</h4>
                                <p class="text-muted">Organize your products</p>
                            </div>
                            <div class="card-footer bg-transparent border-top-0">
                                <span class="text-warning">View Categories <i class="fa fa-arrow-right ml-1"></i></span>
                            </div>
                        </a>
                    </div>

                    <!-- Discounts Card -->
                    <div class="col-md-4 mb-4">
                        <a href="/ecommerce_admin/discounts" class="card dashboard-card h-100 text-decoration-none">
                            <div class="card-body text-center">
                                <div class="dashboard-icon bg-danger-light">
                                    <i class="fa fa-percentage text-danger"></i>
                                </div>
                                <h4 class="card-title mt-3">Discounts</h4>
                                <p class="text-muted">Create and manage discounts</p>
                            </div>
                            <div class="card-footer bg-transparent border-top-0">
                                <span class="text-danger">View Discounts <i class="fa fa-arrow-right ml-1"></i></span>
                            </div>
                        </a>
                    </div>
                </div>


                <!-- Quick Stats Row -->
                <div class="row mt-4">
                    <div class="col-md-3 mb-4">
                        <div class="card stat-card">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <h6 class="text-muted mb-2">Total Products</h6>
                                        <h3 class="mb-0">1,248</h3>
                                    </div>
                                    <div class="stat-icon bg-primary-light">
                                        <i class="fa fa-box text-primary"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="card stat-card">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <h6 class="text-muted mb-2">New Orders</h6>
                                        <h3 class="mb-0">56</h3>
                                    </div>
                                    <div class="stat-icon bg-success-light">
                                        <i class="fa fa-shopping-bag text-success"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="card stat-card">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <h6 class="text-muted mb-2">Customers</h6>
                                        <h3 class="mb-0">892</h3>
                                    </div>
                                    <div class="stat-icon bg-info-light">
                                        <i class="fa fa-user-friends text-info"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="card stat-card">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <h6 class="text-muted mb-2">Revenue</h6>
                                        <h3 class="mb-0">$24,560</h3>
                                    </div>
                                    <div class="stat-icon bg-warning-light">
                                        <i class="fa fa-dollar-sign text-warning"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <style>
                    .dashboard-card {
                        border: none;
                        border-radius: 10px;
                        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                        transition: all 0.3s ease;
                    }
                    .dashboard-card:hover {
                        transform: translateY(-5px);
                        box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
                    }
                    .dashboard-icon {
                        width: 60px;
                        height: 60px;
                        margin: 0 auto;
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-size: 24px;
                    }
                    .stat-card {
                        border-radius: 10px;
                        border: none;
                        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
                    }
                    .stat-icon {
                        width: 40px;
                        height: 40px;
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    }
                    .bg-primary-light {
                        background-color: rgba(13, 110, 253, 0.1);
                    }
                    .bg-success-light {
                        background-color: rgba(25, 135, 84, 0.1);
                    }
                    .bg-info-light {
                        background-color: rgba(13, 202, 240, 0.1);
                    }
                    .bg-warning-light {
                        background-color: rgba(255, 193, 7, 0.1);
                    }
                    .bg-danger-light {
                        background-color: rgba(220, 53, 69, 0.1);
                    }
                    .text-danger {
                        color: #dc3545 !important;
                    }
                    .text-warning {
                        color: #ffc107 !important;
                    }
                </style>
            </div>
        </t>
    </template>
<template id="order_list_template" name="Order List Page">
  <t t-call="website.layout">
    <div class="container mt-5">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0">Order List</h2>
        <a href="/ecommerce_admin/dashboard" class="btn btn-success">
          <i class="fa fa-tachometer-alt me-2"></i> Dashboard
        </a>
      </div>
        <!-- ðŸ” Search and Filter Form -->
    <form method="get" class="row g-3 mb-4">
        <div class="col-md-4">
        <input type="text" name="search" class="form-control" placeholder="Search by Order ID" t-att-value="search_term or ''"/>
        </div>
        <div class="col-md-3">
        <select class="form-select" name="status">
            <option value="">All</option>
            <option value="draft" t-att-selected="filter_status == 'draft'">Quotation</option>
            <option value="sale" t-att-selected="filter_status == 'sale'">Confirmed</option>
            <option value="cancel" t-att-selected="filter_status == 'cancel'">Cancelled</option>
        </select>
        </div>
        <t t-if="filter_customer_id">
        <input type="hidden" name="customer_id" t-att-value="filter_customer_id"/>
        </t>
        <div class="col-md-2">
        <button type="submit" class="btn btn-outline-primary w-100">
            <i class="fa fa-filter me-2"></i> Apply
        </button>
        </div>
        <div class="col-md-2">
        <a href="/ecommerce_admin/order" class="btn btn-outline-secondary w-100">
            <i class="fa fa-times me-2"></i> Clear
        </a>
        </div>
    </form>
    <t t-if="filter_customer_id">
    <div class="alert alert-info mb-3">
        Showing orders for: <strong><t t-esc="orders and orders[0].partner_id.name or 'Customer'"/></strong>
        <a href="/ecommerce_admin/order" class="btn btn-sm btn-outline-info ms-3">Clear Filter</a>
    </div>
    </t>
      <div class="table-responsive shadow-sm rounded">
        <table class="table table-striped table-hover align-middle">
          <thead class="table-success">
            <tr>
              <th>Order</th>
              <th>Customer</th>
              <th>Phone</th>
              <th>Total</th>
              <th>Payment</th>
              <th>Date</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <t t-foreach="orders" t-as="order">
              <tr>
                <td>
                <strong>
                    <a t-attf-href="/ecommerce_admin/order/{{ order.id }}" class="text-success text-decoration-none">
                    <t t-esc="order.name"/>
                    </a>
                </strong>
                </td>
                <td><t t-esc="order.partner_id.name"/></td>
                <td><t t-esc="order.partner_id.phone or 'N/A'"/></td>
                <td>Rs. <t t-esc="order.amount_total"/></td>
                <td>
                <t t-set="payment" t-value="order.transaction_ids and order.transaction_ids[0]"/>
                <t t-if="payment">
                    <t t-if="payment.provider_id">
                    <t t-esc="payment.provider_id.name"/>
                    </t>
                    <t t-elif="payment.acquirer_id">
                    <t t-esc="payment.acquirer_id.name"/>
                    </t>
                    <t t-else="">
                    Unknown
                    </t>
                </t>
                <t t-if="not payment">N/A</t>
                </td>

                <td><t t-esc="order.date_order.strftime('%Y-%m-%d')"/></td>
                <td>
                  <span t-if="order.state == 'sale'" class="badge bg-success">Paid</span>
                  <span t-if="order.state == 'draft'" class="badge bg-warning text-dark">Unpaid</span>
                  <span t-if="order.state == 'sent'" class="badge bg-warning text-dark">Unpaid</span>
                  <span t-if="order.state == 'cancel'" class="badge bg-danger">Cancelled</span>
                </td>
              </tr>
            </t>
          </tbody>
        </table>
      </div>
    </div>
  </t>
</template>
<template id="order_detail_template" name="Order Detail Page">
  <t t-call="website.layout">
    <div class="container mt-5">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0">Order: <t t-esc="order.name"/></h2>
        <a href="/ecommerce_admin/order" class="btn btn-outline-success">
          <i class="fa fa-arrow-left me-2"></i> Back to Orders
        </a>
      </div>

      <div class="card shadow-sm mb-4">
        <div class="card-body">
          <h5 class="mb-3 text-success">Customer Information</h5>
          <p><strong>Name:</strong> <t t-esc="order.partner_id.name"/></p>
          <p><strong>Email:</strong> <t t-esc="order.partner_id.email or 'N/A'"/></p>
          <p><strong>Phone:</strong> <t t-esc="order.partner_id.phone or 'N/A'"/></p>
        </div>
      </div>

    <div class="card shadow-sm mb-4">
    <div class="card-body">
        <h5 class="mb-3 text-success">Order Summary</h5>
        <p><strong>Order Date:</strong> <t t-esc="order.date_order.strftime('%Y-%m-%d %H:%M')"/></p>
        <p><strong>Total Amount:</strong> Rs. <t t-esc="order.amount_total"/></p>
        <p><strong>Status:</strong>
        <span t-if="order.state == 'sale'" class="badge bg-success">Paid</span>
        <span t-if="order.state == 'draft'" class="badge bg-warning text-dark">Unpaid</span>
        <span t-if="order.state == 'sent'" class="badge bg-warning text-dark">Unpaid</span>
        <span t-if="order.state == 'cancel'" class="badge bg-danger">Cancelled</span>
        </p>
        <p><strong>Delivery Status:</strong>
            <span t-if="order.is_delivered" class="badge bg-success">Delivered</span>
            <span t-else="" class="badge bg-secondary">Not Delivered</span>
        </p>
        <div class="d-flex justify-content-end mt-4 gap-3">
        <!-- Pay Button -->
        <form method="POST" t-att-action="'/ecommerce_admin/order/%s/pay' % order.id">
        <button type="submit"
                class="btn btn-primary"
                t-att-disabled="order.state not in ['draft', 'sent']">

            <i class="fa fa-credit-card me-2"></i> Pay
            </button>
        </form>

        <!-- Deliver Button -->
    <form method="POST" t-att-action="'/ecommerce_admin/order/%s/deliver' % order.id">
        <button type="submit"
                class="btn btn-success"
                t-att-disabled="not (order.state == 'sale' and can_deliver)">
            <i class="fa fa-truck me-2"></i> Deliver
        </button>
    </form>


        </div>
    </div>
    </div>

      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="mb-3 text-success">Order Lines</h5>
          <div class="table-responsive">
            <table class="table table-bordered table-hover align-middle">
              <thead class="table-light">
                <tr>
                  <th>Product</th>
                  <th>Description</th>
                  <th>Quantity</th>
                  <th>Unit Price</th>
                  <th>Subtotal</th>
                </tr>
              </thead>
              <tbody>
                <t t-foreach="order.order_line" t-as="line">
                  <tr>
                    <td><t t-esc="line.product_id.name"/></td>
                    <td><t t-esc="line.name"/></td>
                    <td><t t-esc="line.product_uom_qty"/></td>
                    <td>Rs. <t t-esc="line.price_unit"/></td>
                    <td>Rs. <t t-esc="line.price_subtotal"/></td>
                  </tr>
                </t>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </t>
</template>

<template id="product_list" name="Product List">
    <t t-call="website.layout">
        <div class="container my-5">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2 class="mb-0">Products</h2>
                <div class="d-flex gap-2">
                    <a href="/ecommerce_admin/dashboard" class="btn btn-outline-primary">
                        <i class="fa fa-tachometer-alt me-2"></i>Dashboard
                    </a>
                    <a href="/ecommerce_admin/products/create" class="btn btn-success">
                        <i class="fa fa-plus me-2"></i>Create Product
                    </a>
                </div>
            </div>

            <!-- Search and Filter Section -->
            <div class="card mb-4 shadow-sm">
                <div class="card-body">
                    <form method="get" action="/ecommerce_admin/products" class="row g-3">
                        <div class="col-md-6">
                            <div class="input-group">
                                <span class="input-group-text bg-light">
                                    <i class="fa fa-search"></i>
                                </span>
                                <input type="text" name="search" class="form-control" 
                                    placeholder="Search products..." t-att-value="search_query or ''"/>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <select name="category" class="form-select">
                                <option value="">All Categories</option>
                                <t t-foreach="categories" t-as="cat">
                                    <option t-att-value="cat.id" 
                                            t-att-selected="selected_category and selected_category == cat.id and 'selected' or None">
                                        <t t-esc="cat.display_name"/>
                                    </option>
                                </t>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <button type="submit" class="btn btn-primary w-100">
                                <i class="fa fa-filter mr-2"></i> Filter
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <style>
                .product-card {
                    height: 100%;
                    display: flex;
                    flex-direction: column;
                    transition: transform 0.3s ease, box-shadow 0.3s ease;
                }
                .product-card:hover {
                    transform: translateY(-5px);
                    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
                }
                .product-image-wrapper {
                    height: 200px;
                    overflow: hidden;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    background-color: #f8f9fa;
                }
                .product-thumb {
                    width: 100%;
                    height: 100%;
                    object-fit: contain;
                    object-position: center;
                    transition: transform 0.3s ease;
                }
                .product-card:hover .product-thumb {
                    transform: scale(1.05);
                }
                .card-body {
                    flex-grow: 1;
                }
                .badge-category {
                    position: absolute;
                    top: 10px;
                    right: 10px;
                    background-color: rgba(0,0,0,0.7);
                }
                .page-item.active .page-link {
                    background-color: #0d6efd;
                    border-color: #0d6efd;
                }
            </style>

            <div class="row">
                <t t-if="products">
                    <t t-foreach="products" t-as="product">
                        <div class="col-sm-6 col-md-4 col-lg-3 mb-4 d-flex">
                            <a t-att-href="'/ecommerce_admin/products/%s' % product.id" class="text-decoration-none text-dark w-100">
                                <div class="card h-100 shadow-sm product-card">
                                    <div class="product-image-wrapper position-relative">
                                        <img t-attf-src="/web/image/product.template/{{ product.id }}/image_1920"
                                            class="product-thumb"
                                            t-att-data-fallback="'/web/static/src/img/placeholder.png'"
                                            alt="Product Image"/>
                                    </div>
                                    <div class="card-body d-flex flex-column">
                                        <h5 class="card-title text-truncate"><t t-esc="product.name"/></h5>
                                        <div class="mt-auto">
                                            <p class="card-text font-weight-bold mb-1">Rs. <t t-esc="product.list_price"/></p>
                                            <small class="text-muted">
                                                <t t-if="product.create_date">
                                                    Added: <t t-esc="format_date(product.create_date)"/>
                                                </t>
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </t>
                </t>
                <t t-else="">
                    <div class="col-12 text-center py-5">
                        <i class="fa fa-box-open fa-3x text-muted mb-3"></i>
                        <p class="text-muted">No products found.</p>
                        <a href="/ecommerce_admin/products" class="btn btn-outline-primary">
                            <i class="fa fa-sync-alt mr-2"></i> Reset Filters
                        </a>
                    </div>
                </t>
            </div>

            <!-- Pagination -->
            <t t-if="page_count > 1">
                <nav aria-label="Product pagination">
                    <ul class="pagination justify-content-center">
                        <li class="page-item" t-att-class="'disabled' if current_page == 1 else ''">
                            <a class="page-link" t-att-href="'/ecommerce_admin/products?page=%s&amp;search=%s&amp;category=%s' % (current_page-1, search_query or '', selected_category or '')">
                                Previous
                            </a>
                        </li>
                        <t t-foreach="range(1, page_count+1)" t-as="page">
                            <li class="page-item" t-att-class="'active' if page == current_page else ''">
                                <a class="page-link" t-att-href="'/ecommerce_admin/products?page=%s&amp;search=%s&amp;category=%s' % (page, search_query or '', selected_category or '')">
                                    <t t-esc="page"/>
                                </a>
                            </li>
                        </t>
                        <li class="page-item" t-att-class="'disabled' if current_page == page_count else ''">
                            <a class="page-link" t-att-href="'/ecommerce_admin/products?page=%s&amp;search=%s&amp;category=%s' % (current_page+1, search_query or '', selected_category or '')">
                                Next
                            </a>
                        </li>
                    </ul>
                </nav>
            </t>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Handle image fallback
                document.querySelectorAll('img[data-fallback]').forEach(function(img) {
                    img.onerror = function() {
                        this.src = this.dataset.fallback;
                    };
                });
            });
        </script>
    </t>
</template>
<template id="product_detail" name="Product Detail">
    <t t-call="website.layout">
        <div class="container py-5">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                    <h2 class="h5 mb-0">
                        <i class="fa fa-cube me-2"></i>Product Details
                    </h2>
                    <div class="d-flex gap-2">
                        <a t-att-href="'/ecommerce_admin/products/%s/edit' % product.id" class="btn btn-warning btn-sm">
                            <i class="fa fa-edit me-1"></i>Edit
                        </a>
                        <a href="/ecommerce_admin/products" class="btn btn-outline-light btn-sm">
                            <i class="fa fa-arrow-left me-1"></i>Back
                        </a>
                    </div>
                </div>

                <div class="card-body">
                    <div class="row g-4">
                        <!-- Product Image -->
                        <div class="col-md-6">
                            <div class="border rounded d-flex align-items-center justify-content-center bg-light" style="height: 400px;">
                                <img t-if="product.image_1920" 
                                     t-att-src="'/web/image/product.template/%s/image_1920' % product.id" 
                                     alt="Product Image"
                                     class="img-fluid object-fit-contain" style="max-height: 100%; max-width: 100%;"
                                     t-att-data-fallback="'/web/static/src/img/placeholder.png'"/>
                                <img t-if="not product.image_1920" 
                                     t-att-src="'/web/static/src/img/placeholder.png'" 
                                     alt="No Image"
                                     class="img-fluid object-fit-contain" style="max-height: 100%; max-width: 100%;"/>
                            </div>
                        </div>

                        <!-- Product Info -->
                        <div class="col-md-6">
                            <h3 class="fw-semibold mb-3 text-dark"><t t-esc="product.name"/></h3>

                            <div class="mb-3">
                                <h4 class="text-success">Rs. <t t-esc="product.list_price"/></h4>
                                <p class="text-muted mb-0">Cost Price: Rs. <t t-esc="product.standard_price or '0.00'"/></p>
                            </div>

                            <hr class="my-4"/>

                            <div class="row mb-3">
                                <div class="col-6">
                                    <p class="mb-1"><strong>Product ID:</strong></p>
                                    <p class="text-muted"><t t-esc="product.id"/></p>
                                </div>
                                <div class="col-6">
                                    <p class="mb-1"><strong>Created On:</strong></p>
                                    <p class="text-muted"><t t-esc="format_date(product.create_date)"/></p>
                                </div>
                            </div>

                            <t t-if="product.public_categ_ids">
                                <div class="mb-4">
                                    <p class="mb-1 fw-bold text-primary">Categories</p>
                                    <div class="d-flex flex-wrap gap-2">
                                        <t t-foreach="product.public_categ_ids" t-as="category">
                                            <span class="badge rounded-pill bg-info text-white px-3 py-2" t-esc="category.name"/>
                                        </t>
                                    </div>
                                </div>
                            </t>

                            <!-- <div class="mt-4">
                                <a t-att-href="'/ecommerce_admin/products/%s/edit' % product.id" class="btn btn-primary">
                                    <i class="fa fa-edit me-2"></i>Edit Product
                                </a>
                            </div> -->

                            <!-- Publish/Unpublish Form Button -->
                            <form method="POST" t-att-action="'/ecommerce_admin/products/%s/toggle_publish' % product.id" class="mt-3">
                                <button type="submit" class="btn" t-att-class="'btn-success' if not product.is_published else 'btn-warning'">
                                    <t t-if="not product.is_published">
                                        <i class="fa fa-eye me-2"></i> Publish
                                    </t>
                                    <t t-else="">
                                        <i class="fa fa-eye-slash me-2"></i> Unpublish
                                    </t>
                                </button>
                            </form>

                        </div>
                    </div>
                </div>
            </div>
        </div>

        <style>
            .object-fit-contain {
                object-fit: contain;
                object-position: center;
            }
            .card-body p {
                margin-bottom: 0.25rem;
            }
            /* Publish/Unpublish Button Styling */
            form button.btn {
                min-width: 140px;
                font-weight: 600;
                border-radius: 0.25rem;
                padding: 0.5rem 1rem;
                transition: background-color 0.3s ease;
            }
            form button.btn-success {
                background-color: #198754;
                color: white;
                border: 1px solid #198754;
            }
            form button.btn-success:hover,
            form button.btn-success:focus {
                background-color: #157347;
                border-color: #146c43;
                color: white;
            }
            form button.btn-warning {
                background-color: #ffc107;
                color: #212529;
                border: 1px solid #ffc107;
            }
            form button.btn-warning:hover,
            form button.btn-warning:focus {
                background-color: #ffca2c;
                border-color: #ffcd39;
                color: #212529;
            }
        </style>

        <script>
            document.addEventListener('DOMContentLoaded', function () {
                document.querySelectorAll('img[data-fallback]').forEach(function (img) {
                    img.onerror = function () {
                        this.src = this.dataset.fallback;
                    };
                });
            });
        </script>
    </t>
</template>


<template id="product_edit" name="Edit Product">
    <t t-call="website.layout">
        <div class="container py-5">
            <div class="row justify-content-center">
                <div class="col-lg-10 col-xl-8">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h2 class="h4 text-primary mb-0"><i class="fa fa-edit me-2"></i>Edit Product</h2>
                        <a href="/ecommerce_admin/products" class="btn btn-outline-secondary">
                            <i class="fa fa-arrow-left me-1"></i>Back to Products
                        </a>
                    </div>
                    <div class="card border-0 shadow-sm">
                        <div class="card-body p-4">
                            <form method="POST" enctype="multipart/form-data" t-att-action="'/ecommerce_admin/products/%s/update' % product.id">
                                <!-- Product Name -->
                                <div class="mb-4">
                                    <label for="name" class="form-label fw-bold">Product Name <span class="text-danger">*</span></label>
                                    <input type="text" name="name" id="name" class="form-control"
                                           placeholder="Enter product name" t-att-value="product.name"
                                           t-att-required="'required'"/>
                                </div>

                                <!-- Price Row -->
                                <div class="row">
                                    <div class="col-md-6 mb-4">
                                        <label for="list_price" class="form-label fw-bold">Sell Price <span class="text-danger">*</span></label>
                                        <div class="input-group">
                                            <span class="input-group-text">Rs.</span>
                                            <input type="number" step="0.01" name="list_price" id="list_price"
                                                   class="form-control" placeholder="0.00"
                                                   t-att-value="product.list_price" t-att-required="'required'"/>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-4">
                                        <label for="standard_price" class="form-label fw-bold">Cost Price</label>
                                        <div class="input-group">
                                            <span class="input-group-text">Rs.</span>
                                            <input type="number" step="0.01" name="standard_price" id="standard_price"
                                                   class="form-control" placeholder="0.00"
                                                   t-att-value="product.standard_price"/>
                                        </div>
                                    </div>
                                </div>

                                <!-- Categories -->
                                <div class="mb-4">
                                    <label for="categ_id" class="form-label fw-bold">Internal Category</label>
                                    <select name="categ_id" id="categ_id" class="form-select" t-att-required="True">
                                        <option value="">-- Select Internal Category --</option>
                                        <t t-foreach="categories" t-as="cat">
                                            <option t-att-value="cat.id"
                                                    t-att-selected="'selected' if product.categ_id and product.categ_id.id == cat.id else None">
                                                <t t-esc="cat.display_name or cat.name"/>
                                            </option>
                                        </t>
                                    </select>
                                </div>

                                <div class="mb-4">
                                    <label for="public_categ_ids" class="form-label fw-bold">Public Categories</label>
                                    <select name="public_categ_ids" id="public_categ_ids" class="form-select" t-att-required="True">
                                        <t t-foreach="public_categories" t-as="cat">
                                            <option t-att-value="cat.id"
                                                    t-att-selected="'selected' if cat.id in product.public_categ_ids.ids else None">
                                                <t t-esc="cat.display_name or cat.name"/>
                                            </option>
                                        </t>
                                    </select>
                                </div>



                                <!-- Image Upload -->
                                <div class="mb-4">
                                    <label for="image_1920" class="form-label fw-bold">Product Image</label>
                                    <div class="border rounded p-3 text-center bg-light">
                                        <img t-att-src="product.image_1920 and '/web/image/product.template/%s/image_1920' % product.id or '/web/static/src/img/placeholder.png'" 
                                             alt="Preview" class="img-fluid mb-3 rounded" style="max-height: 200px;" id="previewImage"/>
                                        <input type="file" name="image_1920" id="image_1920" class="form-control"/>
                                    </div>
                                </div>

                                <!-- Buttons -->
                                <div class="d-flex justify-content-between mt-4">
                                    <a t-att-href="'/ecommerce_admin/products/%s' % product.id" class="btn btn-outline-secondary">
                                        <i class="fa fa-times me-1"></i>Cancel
                                    </a>
                                    <button type="submit" class="btn btn-success">
                                        <i class="fa fa-save me-2"></i>Update Product
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </t>
</template>



<template id="product_create" name="Create Product">
    <t t-call="website.layout">
        <div class="container py-5">
            <div class="row justify-content-center">
                <div class="col-lg-10 col-xl-8">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h2 class="h4 text-primary mb-0"><i class="fa fa-plus-circle me-2"></i>Create New Product</h2>
                        <a href="/ecommerce_admin/products" class="btn btn-outline-secondary">
                            <i class="fa fa-arrow-left me-1"></i>Back to Products
                        </a>
                    </div>
                    <div class="card border-0 shadow-sm">
                        <div class="card-body p-4">
                            <form method="POST" enctype="multipart/form-data" t-attf-class="needs-validation #{error and 'was-validated' or ''}">
                                <!-- Product Name -->
                                <div class="mb-4">
                                    <label for="name" class="form-label fw-bold">Product Name <span class="text-danger">*</span></label>
                                    <input type="text" name="name" id="name" class="form-control"
                                           placeholder="Enter product name" t-att-required="'required'"/>
                                    <t t-if="error and error.get('name')">
                                        <div class="invalid-feedback d-block" t-esc="error.get('name')"/>
                                    </t>
                                </div>

                                <!-- Price Row -->
                                <div class="row">
                                    <div class="col-md-6 mb-4">
                                        <label for="list_price" class="form-label fw-bold">Sell Price <span class="text-danger">*</span></label>
                                        <div class="input-group">
                                            <span class="input-group-text">Rs.</span>
                                            <input type="number" step="0.01" name="list_price" id="list_price"
                                                   class="form-control" placeholder="0.00" t-att-required="'required'"/>
                                            <t t-if="error and error.get('list_price')">
                                                <div class="invalid-feedback d-block" t-esc="error.get('list_price')"/>
                                            </t>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-4">
                                        <label for="standard_price" class="form-label fw-bold">Cost Price</label>
                                        <div class="input-group">
                                            <span class="input-group-text">Rs.</span>
                                            <input type="number" step="0.01" name="standard_price" id="standard_price"
                                                   class="form-control" placeholder="0.00"/>
                                        </div>
                                    </div>
                                </div>

                                <!-- Single Category -->
                        <!-- Internal Category -->
                    <div class="col-md-6">
                        <label for="internal_categ_id" class="form-label">Internal Category</label>
                        <select name="internal_categ_id" id="internal_categ_id" class="form-select" t-att-required="True">
                            <option value="">-- Select Internal Category --</option>
                            <t t-foreach="categories" t-as="cat">
                                <option t-att-value="cat.id">
                                    <t t-esc="cat.complete_name or cat.name"/>
                                </option>
                            </t>
                        </select>
                    </div>

                    <!-- Public Category -->
                    <div class="col-md-6">
                        <label for="public_categ_id" class="form-label">Public Category</label>
                        <select name="public_categ_id" id="public_categ_id" class="form-select" t-att-required="True">
                            <option value="">-- Select Public Category --</option>
                            <t t-foreach="public_categories" t-as="cat">
                                <option t-att-value="cat.id">
                                    <t t-esc="cat.display_name or cat.name"/>
                                </option>
                            </t>
                        </select>
                    </div>


                                <!-- Image Upload -->
                                <div class="mb-4">
                                    <label for="image_1920" class="form-label fw-bold">Product Image</label>
                                    <div class="border rounded p-3 text-center bg-light">
                                        <img t-att-src="existing_image or '/web/static/src/img/placeholder.png'" 
                                             alt="Preview" class="img-fluid mb-3 rounded"
                                             t-att-class="not existing_image and 'd-none' or ''" 
                                             id="previewImage" style="max-height: 200px;"/>
                                        <input type="file" name="image_1920" id="image_1920" class="form-control"/>
                                    </div>
                                </div>

                                <!-- Buttons -->
                                <div class="d-flex justify-content-between mt-4">
                                    <a href="/ecommerce_admin/products" class="btn btn-outline-secondary">
                                        <i class="fa fa-times me-1"></i>Cancel
                                    </a>
                                    <button type="submit" class="btn btn-success">
                                        <i class="fa fa-save me-2"></i>Create Product
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </t>
</template>
<template id="customer_list_template" name="Customer List">
    <t t-call="website.layout">
      <div class="container mt-5">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h2 class="mb-0">Customer List</h2>
          <a href="/ecommerce_admin/dashboard" class="btn btn-info">
            <i class="fa fa-tachometer-alt me-2"></i> Dashboard
          </a>
        </div>

        <div class="table-responsive shadow-sm rounded">
          <table class="table table-hover table-striped align-middle">
            <thead class="table-info">
              <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Company</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              <t t-foreach="customers" t-as="customer">
                <tr>
                  <td><a t-attf-href="/ecommerce_admin/order?customer_id={{ customer.partner_id.id }}" class="text-info text-decoration-none">
              <t t-esc="customer.name"/>
              </a></td>
                  <td><t t-esc="customer.email or 'N/A'"/></td>
                  <td><t t-esc="customer.partner_id.phone or 'N/A'"/></td>
                  <td><t t-esc="customer.partner_id.company_name or 'N/A'"/></td>
                  <td>
                    <span t-if="customer.active" class="badge bg-success">Active</span>
                    <span t-if="not customer.active" class="badge bg-danger">Inactive</span>
                  </td>
                </tr>
              </t>
            </tbody>
          </table>
        </div>
      </div>
    </t>
  </template>
<template id="category_list" name="Category List">
    <t t-call="website.layout">
        <div class="container mt-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2 class="mb-0">Categories Management</h2>
            <div>
                <a href="/ecommerce_admin/dashboard" class="btn btn-secondary me-2">
                    <i class="fa fa-arrow-left me-1"></i> Back to Dashboard
                </a>
                <a href="/ecommerce_admin/categories/create" class="btn btn-success">
                    <i class="fa fa-plus me-1"></i> Create Category
                </a>
            </div>
        </div>

            <!-- Search Box -->
            <div class="card mb-4">
                <div class="card-body">
                    <form method="get" class="row g-3">
                        <div class="col-md-8">
                            <div class="input-group">
                                <input type="text" name="search" class="form-control" 
                                       t-att-value="search_term" placeholder="Search categories..."/>
                                <button type="submit" class="btn btn-outline-primary">
                                    <i class="fa fa-search"></i>
                                </button>
                            </div>
                        </div>
                        <div class="col-md-4 text-end">
                            <a href="/ecommerce_admin/categories" class="btn btn-outline-secondary">
                                <i class="fa fa-refresh me-1"></i>Reset
                            </a>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Categories List -->
            <div class="card">
                <div class="card-body p-0">
                    <div class="list-group list-group-flush">
                        <t t-if="categories">
                            <t t-foreach="categories" t-as="cat">
                                <t t-call="ecommerce_admin.category_item">
                                    <t t-set="category" t-value="cat"/>
                                    <t t-set="level" t-value="0"/>
                                </t>

                            </t>
                        </t>
                        <t t-if="not categories">
                            <!-- Empty State -->
                            <div class="text-center py-5">
                                <i class="fa fa-folder-open fa-4x text-muted mb-3"></i>
                                <h4>No categories found</h4>
                                <p class="text-muted" t-if="search_term">
                                    No results for "<t t-esc="search_term"/>". Try a different search.
                                </p>
                                <p class="text-muted" t-if="not search_term">
                                    You haven't created any categories yet.
                                </p>
                                <a href="/ecommerce_admin/categories/create" class="btn btn-primary mt-3">
                                    <i class="fa fa-plus me-2"></i>Create Your First Category
                                </a>
                            </div>
                        </t>
                    </div>
                </div>
            </div>
        </div>
    </t>
</template>


<template id="category_item">
    <t t-set="safe_level" t-value="level or 0"/>
    <div t-attf-class="list-group-item mb-2 border-start border-3 border-primary ms-{{ safe_level * 4 }}">
        <div class="d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center">
                <i t-attf-class="fa me-3 {{ 'fa-folder-open text-warning' if safe_level == 0 else 'fa-folder text-muted' }}"/>
                <h5 t-if="safe_level == 0" class="mb-0">
                    <t t-esc="category['name']"/>
                </h5>
                <span t-if="safe_level != 0">
                    <t t-esc="category['name']"/>
                </span>
            </div>
            <div>
                <a t-att-href="'/ecommerce_admin/categories/%s' % category['id']" 
                   class="btn btn-sm btn-outline-secondary me-2">
                    <i class="fa fa-edit"></i> Edit
                </a>
                <a t-att-href="'/ecommerce_admin/categories/%s/delete' % category['id']" 
                   class="btn btn-sm btn-outline-danger">
                    <i class="fa fa-trash"></i> Delete
                </a>
            </div>
        </div>

        <!-- Recursive Children -->
        <t t-if="category['children']">
            <t t-foreach="category['children']" t-as="child">
                <t t-call="ecommerce_admin.category_item">
                    <t t-set="category" t-value="child"/>
                    <t t-set="level" t-value="safe_level + 1"/>
                </t>
            </t>
        </t>
    </div>
</template>




<template id="category_detail" name="Edit Category">
    <t t-call="website.layout">
        <div class="container mt-4">
            <!-- Breadcrumb Navigation -->
            <nav aria-label="breadcrumb" class="mb-4">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                        <a t-att-href="'/ecommerce_admin/categories'">Categories</a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page">
                        Edit <t t-esc="category.name"/>
                    </li>
                </ol>
            </nav>

            <div class="card">
                <div class="card-header bg-white d-flex justify-content-between align-items-center">
                    <h4 class="mb-0">
                        <i class="fa fa-pencil-alt text-primary me-2"></i>
                        Edit Category: <span class="text-primary"><t t-esc="category.name"/></span>
                    </h4>
                    <div>
                        <a t-att-href="'/ecommerce_admin/categories'" class="btn btn-outline-secondary">
                            <i class="fa fa-arrow-left me-1"></i> Back to List
                        </a>
                    </div>
                </div>

                <div class="card-body">
                    <!-- Parent Category Info (if exists) -->
                    <t t-if="parent_category">
                        <div class="alert alert-info mb-4">
                            <div class="d-flex align-items-center">
                                <i class="fa fa-info-circle me-3 fs-4"></i>
                                <div>
                                    <h5 class="alert-heading mb-1">Parent Category</h5>
                                    <p class="mb-0">
                                        This category belongs to: 
                                        <a t-att-href="'/ecommerce_admin/categories/%s' % parent_category.id" 
                                           class="fw-bold text-decoration-none">
                                            <t t-esc="parent_category.name"/>
                                        </a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </t>

                    <!-- Child Categories Info (if exists) -->
                    <t t-if="child_categories">
                        <div class="alert alert-warning mb-4">
                            <div class="d-flex align-items-center">
                                <i class="fa fa-exclamation-triangle me-3 fs-4"></i>
                                <div>
                                    <h5 class="alert-heading mb-1">Child Categories</h5>
                                    <p class="mb-2">Changes to this category will affect its child categories:</p>
                                    <div class="d-flex flex-wrap gap-2">
                                        <t t-foreach="child_categories" t-as="child">
                                            <a t-att-href="'/ecommerce_admin/categories/%s' % child.id" 
                                               class="badge bg-light text-dark text-decoration-none">
                                                <i class="fa fa-folder me-1"></i>
                                                <t t-esc="child.name"/>
                                            </a>
                                        </t>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>

                    <!-- Edit Form -->
                    <form t-att-method="'POST'" class="mt-4">
                        <input t-att-type="'hidden'" t-att-name="'csrf_token'" t-att-value="request.csrf_token()"/>
                        
                        <div class="row">
                            <div class="col-md-8">
                                <div class="mb-4">
                                    <label t-att-class="'form-label fw-bold'">Category Name</label>
                                    <input t-att-type="'text'"
                                           t-att-class="'form-control form-control-lg'"
                                           t-att-name="'name'"
                                           t-att-value="category.name"
                                           t-att-required="'required'"/>
                                    <div t-att-class="'form-text'">The name that will appear in your store</div>
                                </div>

                                <div class="mb-4">
                                    <label t-att-class="'form-label fw-bold'">Parent Category</label>
                                    <select t-att-class="'form-select'" t-att-name="'parent_id'">
                                        <option t-att-value="''">-- No Parent Category --</option>
                                        <t t-foreach="request.env['product.public.category'].sudo().search([('id', '!=', category.id)])" t-as="cat">
                                            <option t-att-value="cat.id" 
                                                    t-att-selected="category.parent_id and category.parent_id.id == cat.id">
                                                <t t-esc="cat.display_name"/>
                                            </option>
                                        </t>
                                    </select>
                                    <div t-att-class="'form-text'">Changing parent will reorganize your category hierarchy</div>
                                </div>
                            </div>
                            
                            <div class="col-md-4">
                                <div t-att-class="'card bg-light'">
                                    <div t-att-class="'card-body'">
                                        <h5 t-att-class="'card-title'">
                                            <i t-att-class="'fa fa-cog me-2'"></i>Settings
                                        </h5>
                                        
                                        <div t-att-class="'mb-3'">
                                            <label t-att-class="'form-label fw-bold'">Sequence</label>
                                            <input t-att-type="'number'"
                                                   t-att-class="'form-control'"
                                                   t-att-name="'sequence'"
                                                   t-att-value="category.sequence or 10"/>
                                            <div t-att-class="'form-text'">Lower numbers appear first</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div t-att-class="'d-flex justify-content-between mt-4'">
                            <div>
                                <a t-att-href="'/ecommerce_admin/categories/%s/delete' % category.id" 
                                   t-att-class="'btn btn-outline-danger me-2'">
                                    <i t-att-class="'fa fa-trash me-1'"></i> Delete Category
                                </a>
                            </div>
                            <div>
                                <a t-att-href="'/ecommerce_admin/categories'" t-att-class="'btn btn-outline-secondary me-2'">
                                    Cancel
                                </a>
                                <button t-att-type="'submit'" t-att-class="'btn btn-primary'">
                                    <i t-att-class="'fa fa-save me-1'"></i> Save Changes
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </t>
</template>
<template id="category_create" name="Create Category">
    <t t-call="website.layout">
        <div class="container mt-4">
            <div class="card">
                <div class="card-header bg-white">
                    <div class="d-flex justify-content-between align-items-center">
                        <h2 class="mb-0">
                            <i class="fa fa-plus-circle text-primary me-2"></i>
                            Create New Category
                        </h2>
                        <a t-att-href="'/ecommerce_admin/categories'" class="btn btn-outline-secondary">
                            <i class="fa fa-arrow-left me-1"></i> Back to Categories
                        </a>
                    </div>
                </div>

                <div class="card-body">
                    <form t-att-method="'POST'" class="mt-3">
                        <input t-att-type="'hidden'" t-att-name="'csrf_token'" t-att-value="request.csrf_token()"/>
                        
                        <div class="row">
                            <div class="col-md-8">
                                <div class="mb-4">
                                    <label t-att-class="'form-label fw-bold'">Category Name</label>
                                    <input t-att-type="'text'"
                                           t-att-class="'form-control form-control-lg'"
                                           t-att-name="'name'"
                                           t-att-required="'required'"
                                           t-att-placeholder="'e.g., Electronics, Clothing, etc.'"/>
                                    <div t-att-class="'form-text text-muted'">Enter a descriptive name for your new category</div>
                                </div>

                                <div class="mb-4">
                                    <label t-att-class="'form-label fw-bold'">Parent Category</label>
                                    <select t-att-class="'form-select'" t-att-name="'parent_id'">
                                        <option t-att-value="''">-- No Parent Category --</option>
                                        <t t-foreach="parent_categories" t-as="pc">
                                            <option t-att-value="pc.id">
                                                <t t-esc="pc.display_name"/>
                                            </option>
                                        </t>
                                    </select>
                                    <div t-att-class="'form-text text-muted'">Select if this should be a sub-category</div>
                                </div>

                                <div class="d-flex justify-content-end mt-4">
                                    <button t-att-type="'submit'" t-att-class="'btn btn-primary px-4 py-2'">
                                        <i class="fa fa-save me-2"></i>Create Category
                                    </button>
                                </div>
                            </div>
                            
                            <div class="col-md-4">
                                <div t-att-class="'card bg-light'">
                                    <div t-att-class="'card-body'">
                                        <h5 t-att-class="'card-title'">
                                            <i class="fa fa-info-circle me-2"></i>Tips
                                        </h5>
                                        <ul class="list-unstyled">
                                            <li class="mb-2">
                                                <small class="text-muted">
                                                    <i class="fa fa-check-circle text-success me-1"></i>
                                                    Keep category names clear and descriptive
                                                </small>
                                            </li>
                                            <li class="mb-2">
                                                <small class="text-muted">
                                                    <i class="fa fa-check-circle text-success me-1"></i>
                                                    Use sub-categories to organize related products
                                                </small>
                                            </li>
                                            <li>
                                                <small class="text-muted">
                                                    <i class="fa fa-check-circle text-success me-1"></i>
                                                    You can edit categories later
                                                </small>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </t>
</template>
<template id="discount_list" name="Discount List">
    <t t-call="website.layout">
        <div class="container py-5">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2 class="mb-0">Discounts</h2>
            <div>
                <a href="/ecommerce_admin/dashboard" class="btn btn-secondary me-2">
                    <i class="fa fa-arrow-left me-1"></i> Back to Dashboard
                </a>
                <a href="/ecommerce_admin/discounts/create" class="btn btn-success">
                    <i class="fa fa-plus me-1"></i> Create Discount
                </a>
            </div>
        </div>

            <div class="row">
                <t t-foreach="items" t-as="item">
                    <div class="col-md-6 col-lg-4 mb-4">
                        <div class="card shadow-sm h-100">
                            <div class="card-body">
                                <h5 class="card-title">
                                    <i class="fa fa-percentage me-2 text-danger"></i>
                                    <t t-esc="item.pricelist_id.name"/>
                                </h5>
                                <p>Currency: <t t-esc="item.pricelist_id.currency_id.name"/></p>
                                <hr/>
                                <p><strong>Discount:</strong> <t t-esc="item.percent_price"/>%</p>
                                <p><strong>Applied To:</strong>
                                    <t t-if="item.applied_on == '1_product'">
                                        Product: <t t-esc="item.product_tmpl_id.name"/>
                                    </t>
                                    <t t-if="item.applied_on == '2_product_category'">
                                        Category: <t t-esc="item.categ_id.name"/>
                                    </t>
                                </p>
                                <p><strong>Valid:</strong>
                                    <t t-esc="item.date_start"/> to <t t-esc="item.date_end"/>
                                </p>
                            </div>
                            <div class="card-footer d-flex justify-content-between bg-transparent">
                                <a t-attf-href="/ecommerce_admin/discounts/edit/{{item.id}}" class="btn btn-sm btn-outline-primary">
                                    <i class="fa fa-edit"></i> Edit
                                </a>
                                <a t-attf-href="/ecommerce_admin/discounts/delete/{{item.id}}" class="btn btn-sm btn-outline-danger">
                                    <i class="fa fa-trash"></i> Delete
                                </a>
                            </div>
                        </div>
                    </div>
                </t>
            </div>
        </div>
    </t>
</template>
<template id="discount_create" name="Create Discount">
    <t t-set="head">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css"/>
    </t>

    <t t-call="website.layout">
        <div class="container py-5">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h2 class="h4 mb-0"><i class="fa fa-tag me-2"></i>Create Discount</h2>
                </div>
                <div class="card-body">
                    <form method="post" class="row g-3 needs-validation">
                        <input t-att-type="'hidden'" t-att-name="'csrf_token'" t-att-value="request.csrf_token()"/>
                        <!-- Apply Discount To -->
                        <div class="col-md-6">
                            <label for="display_applied_to" class="form-label">Apply Discount To</label>
                            <select id="display_applied_to" name="display_applied_to" class="form-select" required="required">
                                <option value="">-- Select Target --</option>
                                <option value="1_product">Product</option>
                                <option value="2_product_category">Category</option>
                            </select>
                            <div class="invalid-feedback">Please select where to apply the discount.</div>
                        </div>

                        <!-- Product Field -->
                        <div class="col-md-6" id="product_field" style="display:none;">
                            <label for="product_tmpl_id" class="form-label">Product</label>
                            <select id="product_tmpl_id" name="product_tmpl_id" class="form-select select2-product">
                                <option value="">-- Select Product --</option>
                                <t t-foreach="products" t-as="p">
                                    <option t-att-value="p.id"><t t-esc="p.name"/></option>
                                </t>
                            </select>
                        </div>

                        <!-- Category Field -->
                        <div class="col-md-6" id="category_field" style="display:none;">
                            <label for="categ_id" class="form-label">Category</label>
                            <select id="categ_id" name="categ_id" class="form-select select2-category">
                                <option value="">-- Select Category --</option>
                                <t t-foreach="categories" t-as="cat">
                                    <option t-att-value="cat.id"><t t-esc="cat.complete_name"/></option>
                                </t>
                            </select>
                        </div>

                        <!-- Discount Percent -->
                        <div class="col-md-6">
                            <label for="percent_price" class="form-label">Discount Percentage</label>
                            <div class="input-group">
                                <input type="number" id="percent_price" name="percent_price" class="form-control" step="0.01" min="0" max="100" required="required"/>
                                <span class="input-group-text">%</span>
                                <div class="invalid-feedback">Please enter a valid percentage (0â€“100).</div>
                            </div>
                        </div>

                        <!-- Dates -->
                        <div class="col-md-6">
                            <label for="date_start" class="form-label">Start Date</label>
                            <input type="date" id="date_start" name="date_start" class="form-control" required="required"/>
                        </div>
                        <div class="col-md-6">
                            <label for="date_end" class="form-label">End Date</label>
                            <input type="date" id="date_end" name="date_end" class="form-control" required="required"/>
                        </div>
                        <!-- Back Button -->
                        <div class="col-12 text-start">
                            <a href="/ecommerce_admin/discounts" class="btn btn-secondary">
                                <i class="fa fa-arrow-left me-2"></i>Back to Discount List
                            </a>
                        </div>



                        <!-- Submit -->
                        <div class="col-12 text-end">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fa fa-save me-2"></i>Save Discount
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

        <script>
            $(document).ready(function() {
                $('.select2-product').select2({
                    placeholder: 'Search for a product...',
                    width: '100%',
                    allowClear: true
                });

                $('.select2-category').select2({
                    placeholder: 'Search for a category...',
                    width: '100%',
                    allowClear: true
                });

                function toggleFields() {
                    const value = $('#display_applied_to').val();
                    if (value === '1_product') {
                        $('#product_field').show();
                        $('#category_field').hide();
                    } else if (value === '2_product_category') {
                        $('#product_field').hide();
                        $('#category_field').show();
                    } else {
                        $('#product_field').hide();
                        $('#category_field').hide();
                    }
                }

                toggleFields();
                $('#display_applied_to').on('change', toggleFields);
            });
        </script>
    </t>
</template>
<template id="discount_edit" name="Edit Discount">
    <t t-set="head">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css"/>
    </t>

    <t t-call="website.layout">
        <div class="container py-5">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h2 class="h4 mb-0"><i class="fa fa-tag me-2"></i>Edit Discount</h2>
                </div>
                <div class="card-body">
                    <form method="post" class="row g-3 needs-validation">
                        <!-- Apply Discount To -->
                        <div class="col-md-6">
                            <label for="display_applied_to" class="form-label">Apply Discount To</label>
                            <select id="display_applied_to" name="display_applied_to" class="form-select" required="required">
                                <option value="">-- Select Target --</option>
                                <option value="1_product" t-att-selected="item.applied_on == '1_product'">Product</option>
                                <option value="2_product_category" t-att-selected="item.applied_on == '2_product_category'">Category</option>
                            </select>
                        </div>

                        <!-- Product Field -->
                        <div class="col-md-6" id="product_field" style="display:none;">
                            <label for="product_tmpl_id" class="form-label">Product</label>
                            <select id="product_tmpl_id" name="product_tmpl_id" class="form-select select2-product">
                                <option value="">-- Select Product --</option>
                                <t t-foreach="products" t-as="p">
                                    <option t-att-value="p.id" t-att-selected="item.product_tmpl_id and item.product_tmpl_id.id == p.id">
                                        <t t-esc="p.name"/>
                                    </option>
                                </t>
                            </select>
                        </div>

                        <!-- Category Field -->
                        <div class="col-md-6" id="category_field" style="display:none;">
                            <label for="categ_id" class="form-label">Category</label>
                            <select id="categ_id" name="categ_id" class="form-select select2-category">
                                <option value="">-- Select Category --</option>
                                <t t-foreach="categories" t-as="cat">
                                    <option t-att-value="cat.id" t-att-selected="item.categ_id and item.categ_id.id == cat.id">
                                        <t t-esc="cat.complete_name"/>
                                    </option>
                                </t>
                            </select>
                        </div>

                        <!-- Discount Percent -->
                        <div class="col-md-6">
                            <label for="percent_price" class="form-label">Discount Percentage</label>
                            <div class="input-group">
                                <input type="number" id="percent_price" name="percent_price" class="form-control" 
                                       step="0.01" min="0" max="100" required="required"
                                       t-att-value="item.percent_price"/>
                                <span class="input-group-text">%</span>
                            </div>
                        </div>

                        <!-- Dates -->
                        <div class="col-md-6">
                            <label for="date_start" class="form-label">Start Date</label>
                            <input type="date" id="date_start" name="date_start" class="form-control" required="required"
                                   t-att-value="item.date_start and item.date_start.strftime('%Y-%m-%d') or ''"/>
                        </div>
                        <div class="col-md-6">
                            <label for="date_end" class="form-label">End Date</label>
                            <input type="date" id="date_end" name="date_end" class="form-control" required="required"
                                   t-att-value="item.date_end and item.date_end.strftime('%Y-%m-%d') or ''"/>
                        </div>
                        <!-- Back Button -->
                        <div class="col-12 text-start">
                            <a href="/ecommerce_admin/discounts" class="btn btn-secondary">
                                <i class="fa fa-arrow-left me-2"></i>Back to Discount List
                            </a>
                        </div>


                        <!-- Submit -->
                        <div class="col-12 text-end">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fa fa-save me-2"></i>Update Discount
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

        <script>
            $(document).ready(function() {
                $('.select2-product').select2({
                    placeholder: 'Search for a product...',
                    width: '100%',
                    allowClear: true
                });

                $('.select2-category').select2({
                    placeholder: 'Search for a category...',
                    width: '100%',
                    allowClear: true
                });

                function toggleFields() {
                    const value = $('#display_applied_to').val();
                    if (value === '1_product') {
                        $('#product_field').show();
                        $('#category_field').hide();
                    } else if (value === '2_product_category') {
                        $('#product_field').hide();
                        $('#category_field').show();
                    } else {
                        $('#product_field').hide();
                        $('#category_field').hide();
                    }
                }

                toggleFields();
                $('#display_applied_to').on('change', toggleFields);
            });
        </script>
    </t>
</template>
</odoo>